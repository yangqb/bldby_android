# 路由的使用

## Arouter

本项目使用阿里的路由支持库,[点击查看中文官方说明](https://github.com/alibaba/ARouter/blob/master/README_CN.md)

## 在项目中使用

### 页面跳转

```java
  public void start(String url) {
        // 使用两个参数的navigation方法，可以获取单次跳转的结果
        ARouter.getInstance().build(url).navigation(this, this);

    }

    /**
     * 设置传递参数
     *
     * @param url
     * @param bundle
     */
    public void start(String url, Bundle bundle) {
        Postcard build = ARouter.getInstance().build(url);
        build.with(bundle);
        build.navigation(this, this);
    }
```

`Arouter`可以通过注解进行反射把参数进行注入

```java
获取数据三种方式
1.通过Autowired注解表明key   &  需要在onCreate中调用ARouter.getInstance().inject(this);配合使用
    @Autowired(name = "key1")
    public long data;
2.通过Autowired注解 & 将key1作为属性的名称   &  需要在onCreate中调用ARouter.getInstance().inject(this);配合使用
    @Autowired()
   public long key1;
3.通过Bundle获取
    getIntent().getExtras().getLong("key1")
```

### `Fragment`的获取

```java
    public Basefragment getFragment(String url) {
        // 获取Fragment
        Basefragment fragment = (Basefragment) ARouter.getInstance().build(url).navigation(this, this);
        return fragment;
    }

    /**
     * 设置传递参数
     *
     * @param url
     * @param bundle
     */
    public Basefragment getFragmentWithBundle(String url, Bundle bundle) {
        Basefragment fragment = (Basefragment) ARouter
                .getInstance()
                .build(url)
                .with(bundle)
                .navigation(this, this);
        return fragment;
    }

```

### 自定义跳转

```java
 /**
     * 自定义参数 需要手动调用 .navigation(this, this)
     * ARouter.getInstance().build("/test/1")
     * .withLong("key1", 666L)
     * .withString("key3", "888")
     * .withSerializable("key4", new Test("Jack", "Rose"))
     * .withObject("map", map)
     * .navigation();
     * 也可直接获取fragment
     *最后可以跳转时一定要使用navigation(this, this)才可以获取回调
     * @param url
     * @return
     */
    public Postcard startWith(String url) {
        Postcard build = ARouter.getInstance().build(url);
        return build;
    }
```

这样可以获取跳转对象,自由设置参数和进行操作,可以用于跳转`acticity`和获取`fragment`,同时在跳转的时候必须使用`navigation(this, this)`方法,才可以获取到跳转的回调

### 跳转回调回调

```java
 //跳转成功返回
    @Override
    public void onFound(Postcard postcard) {

    }

    //找不到的时候回调
    @Override
    public void onLost(Postcard postcard) {

    }

    //跳转结束
    @Override
    public void onArrival(Postcard postcard) {

    }

    //被拦截
    @Override
    public void onInterrupt(Postcard postcard) {

    }
```

如有需求可以在重写实现,已经在base类集成了



